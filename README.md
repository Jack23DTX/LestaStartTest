# LestaStartTest

## Версия приложения

Текущая версия: **2.0.0**

---

## Описание проекта

LestaStartTest — это веб-приложение, разработанное на языке Go с использованием фреймворка Gin. Оно предоставляет API для работы с документами, коллекциями, пользователями, а также аутентификацию на основе JWT. В последней версии добавлен новый фронтенд, реализованный как SPA (Single Page Application).

---

## Структура проекта

Проект организован следующим образом:

```
LestaStartTest/
├── cmd/
│   └── main.go                // Точка входа в приложение
├── internal/
│   ├── calculation/
│   │   ├── calculation.go     // Логика вычисления TF-IDF
│   │   └── calculation_test.go// Тесты для модуля вычислений
│   ├── controllers/
│   │   ├── auth.go            // API для аутентификации
│   │   ├── collections.go     // API для работы с коллекциями
│   │   ├── controllers.go     // Общая логика контроллеров
│   │   ├── documents.go       // API для работы с документами
│   │   ├── monitoring.go      // Метрики и статус приложения
│   │   └── user.go            // API для работы с пользователями
│   ├── db/
│   │   └── db.go              // Инициализация базы данных
│   ├── middleware/
│   │   └── jwt.go             // Middleware для JWT-аутентификации
│   ├── models/
│   │   └── models.go          // Определение моделей базы данных
│   ├── monitoring/
│   │   └── metrics.go         // Метрики приложения
├── static/
│   └── index.html             // Статика для SPA
├── uploads/                   // Директория для загруженных файлов
├── .env                       // Конфигурационные переменные окружения
├── .env.example               // Пример файла конфигурации
├── .gitignore                 // Игнорируемые файлы Git
├── docker-compose.yaml        // Конфигурация Docker Compose
├── Dockerfile                 // Dockerfile для сборки приложения
├── go.mod                     // Файл модулей Go
├── README.md                  // Документация проекта
└── docs/
    ├── database_schema.md      // Описание структуры базы данных
    ├── changelog.md            // История изменений проекта
```

---

## Запуск приложения

### Предварительные требования

- **Go**: версия 1.23
- **Docker**: убедитесь, что Docker и Docker Compose установлены.
- **PostgreSQL**: приложение зависит от PostgreSQL в качестве базы данных.

### Шаги запуска

1. Клонируйте репозиторий:
    ```bash
    git clone <адрес-репозитория>
    cd LestaStartTest
    ```

2. Создайте файл `.env` в корневой директории со следующим содержимым:
    ```
    JWT_SECRET=uFuHAcBfwJXlAwy+jMRwVWA2K5DGQ7twFCFHSsAq98U=
    MAIN_PORT=:8080
    DB_HOST=db
    DB_USER=postgres
    DB_PASSWORD=2390
    DB_NAME=tfidf
    DB_PORT=5432
    ```

3. Запустите приложение с помощью Docker Compose:
    ```bash
    docker-compose up --build
    ```

4. Откройте `http://localhost:8080`, чтобы получить доступ к приложению.

---

## Конфигурируемые параметры

Все параметры приложения вынесены в файл `.env`. Вот список доступных конфигураций:

### Основные параметры

- `MAIN_PORT` — порт, на котором запускается приложение.
- `JWT_SECRET` — секрет для генерации JWT-токенов.

### Параметры БД

- `DB_HOST` — хост базы данных PostgreSQL.
- `DB_PORT` — порт подключения к базе данных (по умолчанию: `5432`).
- `DB_USER` — имя пользователя для подключения к базе данных.
- `DB_PASSWORD` — пароль для подключения к базе данных.
- `DB_NAME` — имя базы данных.

---

## Документация

- [Структура базы данных](docs/database_schema.md)
- [История изменений (changelog)](docs/changelog.md)
